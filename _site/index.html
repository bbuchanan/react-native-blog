<!DOCTYPE html>
<html lang=" en-US ">

<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,maximum-scale=2">
  <link rel="stylesheet" type="text/css" media="screen" href="/react-native-blog/assets/css/style.css?v=4256c19aa9d98155f8695e3418a2689bcdf122a0"> <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>React Native Sports App Tutorial | Building a small sports score React Native application from the ground up.</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="React Native Sports App Tutorial" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Building a small sports score React Native application from the ground up." />
<meta property="og:description" content="Building a small sports score React Native application from the ground up." />
<link rel="canonical" href="/react-native-blog/" />
<meta property="og:url" content="/react-native-blog/" />
<meta property="og:site_name" content="React Native Sports App Tutorial" />
<script type="application/ld+json">
{"url":"/react-native-blog/","description":"Building a small sports score React Native application from the ground up.","headline":"React Native Sports App Tutorial","name":"React Native Sports App Tutorial","@type":"WebSite","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

  <!-- HEADER -->
  <div id="header_wrap" class="outer">
    <header class="inner">
      <a id="forkme_banner" href="https://github.com/bbuchanan/react-native-sports-app">View on GitHub</a>

      <h1 id="project_title">React Native Sports App Tutorial</h1>
      <h2 id="project_tagline">Building a small sports score React Native application from the ground up.</h2>

      
    </header>
  </div>

  <!-- MAIN CONTENT -->
  <div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">
      <p>You’re looking at the newest post in this tutorial, if you’re just joining us, see the <a href="/react-native-blog/posts.html">complete list of tutorial articles here</a>.</p>

<h1 class="entry-title">
   
  <a href="/react-native-sports-stats-screen.html">React Native Sports Stats Screen</a>
  
</h1>
<div class="entry-content"><div class="PageNavigation">
  
  <a class="prev" href="/react-native-blog/react-native-add-navigation-tabs.html">&laquo; React Native Add Navigation Tabs</a>
   
</div>
<p><a href="/react-native-blog/posts.html">All Posts</a></p>

<h1 id="adding-sports-statistics">Adding Sports Statistics</h1>

<p>This next couple of posts are going to create our second screen that is a placeholder at the moment. We’re not going to learn a lot new as it pertains to React Native, but we’re setting ourselves up to have a little more fun with some third party user interface components. Consider this article a quick review as we stub out a way to display sports statistics. We’re essentially reviewing what we know and then we’re going to tie it all together with some prettiness. Lets get started …</p>

<h2 id="housekeeping-items">Housekeeping Items</h2>

<p>The first thing we’re going to do is rename <code class="highlighter-rouge">Screen2.js</code> to <code class="highlighter-rouge">StatsScreen.js</code>. Some fallout tasks to that is changing the <code class="highlighter-rouge">createNavTabs.js</code> to point to <code class="highlighter-rouge">StatsScreen</code> now (instead of Screen2). We’ll also change the label on the tab from Screen2 to Stats.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">screen</span><span class="p">:</span> <span class="s2">"sports-app.StatsScreen"</span><span class="p">,</span>
  <span class="nx">label</span><span class="p">:</span> <span class="s2">"Stats"</span><span class="p">,</span>
  <span class="nx">icon</span><span class="p">:</span> <span class="nx">sources</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In <code class="highlighter-rouge">App.js</code> change the import statement for Screen2 to</p>

<p><code class="highlighter-rouge">import StatsScreen from "./src/screens/StatsScreen";</code></p>

<p>And change the <code class="highlighter-rouge">registerComponent()</code> for Screen2 to</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Navigation</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s2">"sports-app.StatsScreen"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">StatsScreen</span><span class="p">);</span>
</code></pre></div></div>

<p>The remaining pieces of work involve creating a screen that will load our sports stats.</p>

<h2 id="sports-stats-screen---getting-data">Sports Stats Screen - Getting Data</h2>

<p>If you remember back to when we first starting loading data from MySportsFeed, we set up axios to pull using our authorization key. The great thing about axios is that we were able to tuck away this authorization header and the base URL that forms every request. This
allows us to make short work of getting additional data from MySportsFeed.</p>

<p>The screenshot below shows where we’ll be retrieving the data from.</p>

<p><img src="/react-native-blog/assets/images/my-sports-api-react-native.png" alt="React Native MySportFeed API Stats" /></p>

<h2 id="sports-stats-screen---processing-data">Sports Stats Screen - Processing Data</h2>

<p>I’ll walk through each change to the file from top to bottom, so we’ll start with the imports.</p>

<p>Open the newly renamed <code class="highlighter-rouge">StatsScreen.js</code>.</p>

<p>We’re adding a Picker component which is a React Native component, just like a Text, View, etc. We’re also going to import our axios export.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="s2">"react"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Picker</span> <span class="p">}</span> <span class="k">from</span> <span class="s2">"react-native"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="s2">"../axios-sports"</span><span class="p">;</span>
</code></pre></div></div>

<p>Next, change the class name from Screen2 to StatsScreen.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">StatsScreen</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</code></pre></div></div>

<p>Just like our other screen, we’re going to have a local state that holds information like the current team selected, their stats, if there was an error, etc. Just inside of the class, lets initialize our state.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">currentTeam</span><span class="p">:</span> <span class="s2">"det"</span><span class="p">,</span>
  <span class="na">stats</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="na">hadError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">errorMessage</span><span class="p">:</span> <span class="s2">""</span>
<span class="p">};</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">currentTeam</code> is going to hold a selection from the Picker. This will be used when we load the stats. <code class="highlighter-rouge">stats</code> will hold our loaded stats (if loading is successful), otherwise, <code class="highlighter-rouge">hadError</code> and <code class="highlighter-rouge">errorMessage</code> will become important.</p>

<p>We’re going to hook into the component lifecycle method <code class="highlighter-rouge">componentDidMount</code> once again to load some initial stats.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">loadStats</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now for the heart of the functionality, our stat loading function.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">loadStats</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">axios</span>
    <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`cumulative_player_stats.json?team=</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currentTeam</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">stats</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">cumulativeplayerstats</span><span class="p">.</span><span class="nx">playerstatsentry</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="na">firstName</span><span class="p">:</span> <span class="nx">p</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">FirstName</span><span class="p">,</span>
          <span class="na">lastName</span><span class="p">:</span> <span class="nx">p</span><span class="p">.</span><span class="nx">player</span><span class="p">.</span><span class="nx">LastName</span><span class="p">,</span>
          <span class="na">battingAverage</span><span class="p">:</span> <span class="nx">p</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">BattingAvg</span><span class="p">[</span><span class="s2">"#text"</span><span class="p">],</span>
          <span class="na">homeruns</span><span class="p">:</span> <span class="nx">p</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">Homeruns</span><span class="p">[</span><span class="s2">"#text"</span><span class="p">]</span>
        <span class="p">};</span>
      <span class="p">});</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
        <span class="nx">stats</span>
      <span class="p">});</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
        <span class="na">scores</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="na">hadError</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">errorMessage</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span>
      <span class="p">});</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></div></div>

<p>MySportsFeed really puts stuff in there good and deep, but they’re very thorough, which is why we like them. After all of that, I’m just going to pluck out the player name, his batting average and number of homeruns. You’re welcome to add any stats you’d like. Once we’re extracted what we wanted, we’re going to put the stats into the state so that they can be rendered (this will done in the next article).</p>

<h2 id="loading-team-stats-dynamically">Loading Team Stats Dynamically</h2>

<p>Our last bit of fun for this article is to add support in the user interface to change the team based on user selection. We’ll use the <code class="highlighter-rouge">&lt;Picker /&gt;</code> component we added to our import earlier and a <code class="highlighter-rouge">&lt;Picker /&gt;</code> component exposes a <code class="highlighter-rouge">onValueChange</code> event hook. We’ll subscribe to that with our own function which will update the state and reload the statistics based on the user’s selection. Our handler looks like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">teamSelectionChanged</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span>
    <span class="p">{</span>
      <span class="na">currentTeam</span><span class="p">:</span> <span class="nx">value</span>
    <span class="p">},</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">loadStats</span><span class="p">()</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>It’s quick and easy, but it looks a little different than previous <code class="highlighter-rouge">setState</code> calls because in this version, we utilize a callback that is passed in the second argument. This callback is called when the state has been updated. We could have just as easily added an argument to <code class="highlighter-rouge">loadStats()</code> but I wanted to keep the team synchronized and in one place.</p>

<h2 id="adding-a-react-native-picker">Adding a React Native Picker</h2>

<p>Finally in our <code class="highlighter-rouge">render()</code> function, we’re going to change our <code class="highlighter-rouge">&lt;View&gt;</code> to do a lot more than just return some dummy text. We’re going to add the <code class="highlighter-rouge">Picker</code> with some hard coded teams. The <code class="highlighter-rouge">Picker</code> will also wire up our <code class="highlighter-rouge">ValueChange</code> event.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Picker</span>
        <span class="nx">selectedValue</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currentTeam</span><span class="p">}</span>
        <span class="nx">style</span><span class="o">=</span><span class="p">{{</span> <span class="na">height</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="na">width</span><span class="p">:</span> <span class="mi">100</span> <span class="p">}}</span>
        <span class="nx">onValueChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">teamSelectionChanged</span><span class="p">(</span><span class="nx">value</span><span class="p">)}</span>
      <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Picker</span><span class="p">.</span><span class="nx">Item</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"Tigers"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"det"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">Picker</span><span class="p">.</span><span class="nx">Item</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"Braves"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"atl"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">Picker</span><span class="p">.</span><span class="nx">Item</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"Red Sox"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"bos"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">Picker</span><span class="p">.</span><span class="nx">Item</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"Rays"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"tam"</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">Picker</span><span class="p">.</span><span class="nx">Item</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"Mariners"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"sea"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/Picker</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The React Native picker <code class="highlighter-rouge">onValueChange</code> will pass two arguments. The selected value, which is what is in each <code class="highlighter-rouge">&lt;Picker.Item&gt; value</code> tag and the display index. We don’t need the display index of item, but I thought I’d point it out anyway.</p>

<p>We’re only passing the <code class="highlighter-rouge">value</code> to the <code class="highlighter-rouge">this.teamSelectionChanged()</code> function. Since this is wired up, we should be able to see our stats. I’m going to fire up the React Native Debugger. If you haven’t heard of React Native Debugger, it’s a great tool that you really need to know about now. Stop everything and read the section <a href="2018-04-20-react-native-state.md">Analyzing State In the React Native Debugger</a> where I give a quick overview of how to install and use React Native Debugger.</p>

<p>And here we see our hometown Atlanta Braves stats in our state. Thankfully Ronald Acuna isn’t batting 0.000 this year.</p>

<p><img src="/react-native-blog/assets/images/react-native-state-sports-stats.png" alt="React Native State Sports Stats" /></p>

<p>It ain’t pretty, but we’ve done all of the heavy lifting necessary now to put a pretty face on this screen, which will happen in the next set of articles.</p>

<p><a href="https://github.com/bbuchanan/react-native-sports-app/tree/dd210644577f387af0513b1da31fdc7a7f62e8df" target="_blank">React Native Sports App Tutorial up to this point.</a></p>

<h1> Need a Full Stack React Developer?</h1>

<p>I’m your guy! I’ve been a contract developer for over 14 years and can help you or your company on your project. The best
way to contact me is via our company page.
<a href="https://www.yyesoftware.com" target="_blank">Yye Software</a> is an application development company based in the Atlanta metro area with offices in Kennesaw.</p>
</div>

    </section>
  </div>

  <!-- FOOTER  -->
  <div id="footer_wrap" class="outer">
    <footer class="inner">
      
      <p class="copyright">React Native Sports App Tutorial maintained by
        <a href="http://github.com/bbuchanan">bbuchanan</a>
      </p>
      
      <p>Published with
        <a href="https://pages.github.com">GitHub Pages</a>
      </p>
    </footer>
  </div>

  
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-101201-1', 'auto');
    ga('send', 'pageview');
  </script> 
</body>

</html>